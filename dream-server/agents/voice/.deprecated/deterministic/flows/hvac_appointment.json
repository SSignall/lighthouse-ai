{
  "name": "hvac_appointment",
  "initial_state": "S0_greeting",
  "states": {
    "S0_greeting": {
      "say": "greeting",
      "expect": ["schedule_service", "emergency", "ask_question"],
      "next": {
        "schedule_service": "S1_get_issue",
        "emergency": "S0_emergency",
        "ask_question": "S_llm_mode"
      }
    },
    "S0_emergency": {
      "say": "emergency_transfer",
      "final": true
    },
    "S1_get_issue": {
      "say": "ask_issue",
      "capture": {"issue_description": "text"},
      "expect": ["describe_issue"],
      "next": {
        "describe_issue": "S2_get_time",
        "_default": "S2_get_time"
      }
    },
    "S2_get_time": {
      "say": "ask_time",
      "capture": {"preferred_time": "text"},
      "expect": ["provide_time"],
      "next": {
        "provide_time": "S3_confirm",
        "_default": "S2_get_time"
      }
    },
    "S3_confirm": {
      "say": "confirm",
      "expect": ["confirm_yes", "confirm_no"],
      "next": {
        "confirm_yes": "S4_booked",
        "confirm_no": "S2_get_time",
        "_default": "S3_confirm"
      }
    },
    "S4_booked": {
      "say": "booked",
      "final": true
    },
    "S_llm_mode": {
      "say": "llm_handoff",
      "final": true
    }
  },
  "templates": {
    "greeting": "Thanks for calling Grace HVAC. I can help you schedule service or answer questions. How can I help today?",
    "ask_issue": "I'd be happy to schedule a service visit. Can you briefly describe the issue you're experiencing?",
    "ask_time": "Got it. When would be a good time for a technician to come out?",
    "confirm": "I have you down for {preferred_time}. Does that work for you?",
    "booked": "You're all set! We'll see you at {preferred_time}. Is there anything else I can help with?",
    "emergency_transfer": "I understand this is urgent. Let me transfer you to our emergency line right away.",
    "llm_handoff": "Let me look into that for you...",
    "fallback": "I want to make sure I help you correctly. Could you tell me a bit more?"
  }
}
