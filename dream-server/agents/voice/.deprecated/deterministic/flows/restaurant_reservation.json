{
  "name": "restaurant_reservation",
  "initial_state": "S0_greeting",
  "states": {
    "S0_greeting": {
      "say": "greeting",
      "expect": ["make_reservation", "check_hours", "menu_question"],
      "next": {
        "make_reservation": "S1_get_party_size",
        "check_hours": "S0_hours_info",
        "menu_question": "S_llm_mode"
      }
    },
    "S0_hours_info": {
      "say": "hours_info",
      "expect": ["make_reservation"],
      "next": {
        "make_reservation": "S1_get_party_size",
        "_default": "S0_greeting"
      }
    },
    "S1_get_party_size": {
      "say": "ask_party_size",
      "capture": {"party_size": "text"},
      "expect": ["provide_number"],
      "next": {
        "provide_number": "S2_get_date",
        "_default": "S2_get_date"
      }
    },
    "S2_get_date": {
      "say": "ask_date",
      "capture": {"reservation_date": "text"},
      "expect": ["provide_date"],
      "next": {
        "provide_date": "S3_get_time"
      }
    },
    "S3_get_time": {
      "say": "ask_time",
      "capture": {"reservation_time": "text"},
      "expect": ["provide_time"],
      "next": {
        "provide_time": "S4_get_name"
      }
    },
    "S4_get_name": {
      "say": "ask_name",
      "capture": {"guest_name": "text"},
      "expect": ["provide_name"],
      "next": {
        "provide_name": "S5_confirm"
      }
    },
    "S5_confirm": {
      "say": "confirm",
      "expect": ["confirm_yes", "confirm_no"],
      "next": {
        "confirm_yes": "S6_booked",
        "confirm_no": "S1_get_party_size"
      }
    },
    "S6_booked": {
      "say": "booked",
      "final": true
    },
    "S_llm_mode": {
      "say": "llm_handoff",
      "final": true
    }
  },
  "templates": {
    "greeting": "Thank you for calling The Garden Bistro. I can help you make a reservation or answer questions about our hours. How may I help you?",
    "ask_party_size": "I'd be happy to help with a reservation. How many people will be dining?",
    "ask_date": "Great, a table for {party_size}. What date were you thinking?",
    "ask_time": "And what time would you like to reserve for {reservation_date}?",
    "ask_name": "Perfect. And may I have a name for the reservation?",
    "confirm": "Let me confirm: a table for {party_size} on {reservation_date} at {reservation_time} under the name {guest_name}. Is that correct?",
    "booked": "You're all set! We look forward to seeing your party of {party_size} on {reservation_date} at {reservation_time}. See you then!",
    "hours_info": "We're open Tuesday through Sunday, 5pm to 10pm. We're closed on Mondays. Would you like to make a reservation?",
    "llm_handoff": "Great question! Let me look that up for you...",
    "fallback": "I'm sorry, I didn't catch that. Could you repeat that?"
  }
}
